{{#if user}}
  <p>
    By {{#link-to "user.sessions" session_model.user_email}}
    {{if user.full_name user.full_name user.email}} {{users/user-avatar user=user real_email=session_model.real_email}}
    {{/link-to}}

    {{#if (and session_model.real_email (not (eq session_model.real_email user.email))) }}
      <div class="faint">
	Run through <strong>{{session_model.real_email}}</strong> {{users/user-avatar email=session_model.real_email}}
      </div>
    {{/if}}
  </p>
{{/if}}

<p class="add-margin-bottom">
  {{status-label status=session_model.computed_status}}
</p>


{{#if session_model.is_abandoned}}
  <p class="faint">
    The session stopped sending keepalive signals to Backslash and is therefore considered defunct.
  </p>
{{/if}}

{{#if session_model.in_pdb }}
  <p class="faint">
    <i class="fa fa-warning"></i> Session is currently being investigated using an interactive debugger
  </p>
{{/if}}

{{#if session_model.has_fatal_errors}}
  <div class="alert alert-danger" role="alert">
    The session was terminated due to a fatal error encountered during its execution.
  </div>
{{/if}}

{{#if session_model.is_parent_session}}
  <p>
    <i class="fa fa-arrows-alt"></i> This session was run in parallel mode. Actual tests run by child sessions.
  </p>
{{/if}}

{{#if session_model.parent_logical_id}}
  <p>
    <i class="fa fa-arrows-alt"></i> This session is a part of a {{#link-to "session" session_model.parent_logical_id}}parallel session{{/link-to}}.
  </p>
  <p>Child ID: #{{session_model.child_id}}</p>
{{/if}}


<p class="add-margin-bottom">
  {{session-breakdown session=session_model}}
</p>

<p>
  {{#if session_model.is_abandoned}}
    <i class="fa fa-clock-o fa-fw"></i> {{humanized-duration start_time=session_model.start_time end_time=session_model.next_keepalive}} (keepalive stopped at {{moment-time unix=session_model.next_keepalive}})
  {{else}}
    <i class="fa fa-clock-o fa-fw"></i> {{humanized-duration start_time=session_model.start_time end_time=session_model.end_time}}
  {{/if}}
</p>

<p>
  <i class="fa fa-fw fa-hourglass-1"></i> {{moment-time unix=session_model.start_time}}
</p>

<p>
  <i class="fa fa-fw fa-hourglass-3"></i> {{moment-time unix=session_model.end_time}}
</p>

{{#each session_model.subjects as |subject|}}
  <p>
    <i class="fa fa-rocket"></i>
    {{#link-to 'subject' subject.name}}
      <strong>{{subject.name}}</strong>
    {{/link-to}}
    <span class="badge badge-light badge-pill">{{subject.version}}</span>
  </p>
{{/each}}

{{#if session_model.infrastructure }}
  <p>
  {{infrastructure-icon session_model.infrastructure}} {{session_model.infrastructure}}
  </p>
{{/if}}

{{#each session_model.labels as |label|}}
  <p>
    {{item-label label=label}}
  </p>
{{/each}}

{{#each metadata_display_items as |item|}}
  {{#with (get metadata item.key) as |value|}}
    {{#if value}}
      <p>
        <i class="fa fa-info-circle"></i> {{item.name}}: <strong>{{get metadata item.key}}</strong>
      </p>
    {{/if}}
  {{/with}}
{{/each}}

{{#each timings as |timing|}}
  <div class="row faint">
    <div class="col-sm-6"><i class="fa fa-clock-o"></i> {{timing.name}}</div>
    <div class="col-sm-6">{{humanized-duration start_time=0 end_time=timing.total}}</div>
  </div>
{{/each}}

